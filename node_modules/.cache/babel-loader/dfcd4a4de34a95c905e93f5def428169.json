{"ast":null,"code":"import NProgress from 'nprogress';\nimport { mapState } from 'vuex';\nimport BaseInput from '@/components/BaseInput.vue';\nimport BaseSelect from '@/components/BaseSelect.vue';\nimport BaseButton from '@/components/BaseButton.vue';\nimport { useVuelidate } from '@vuelidate/core';\nimport { required } from '@vuelidate/validators';\nexport default {\n  setup: () => ({\n    v$: useVuelidate()\n  }),\n\n  data() {\n    const times = [];\n\n    for (let i = 1; i <= 24; i++) {\n      times.push(i + \":00\");\n    }\n\n    return {\n      times,\n      event: this.createFreshEventObject()\n    };\n  },\n\n  validations() {\n    return {\n      event: {\n        category: {\n          required\n        },\n        title: {\n          required\n        },\n        description: {\n          required\n        },\n        location: {\n          required\n        },\n        date: {\n          required\n        },\n        time: {\n          required\n        }\n      }\n    };\n  },\n\n  methods: {\n    createEvent() {\n      this.v$.$touch();\n      if (!this.v$.$touch()) NProgress.start();\n      this.$store.dispatch(\"event/createEvent\", this.event).then(() => {\n        this.$router.push({\n          name: \"event-show\",\n          params: {\n            id: this.event.id\n          }\n        });\n        this.event = this.createFreshEventObject();\n      }).catch(() => {\n        NProgress.done();\n      });\n    },\n\n    createFreshEventObject() {\n      const user = this.$store.state.user.user;\n      const id = Math.floor(Math.random() * 10000000);\n      return {\n        id: id,\n        user: this.$store.state.user,\n        category: \"\",\n        organizer: user,\n        title: \"\",\n        description: \"\",\n        location: \"\",\n        date: \"\",\n        time: \"\",\n        attendees: []\n      };\n    }\n\n  },\n  computed: { ...mapState([\"categories\"])\n  },\n  components: {\n    BaseInput,\n    BaseSelect,\n    BaseButton\n  }\n};","map":{"version":3,"mappings":"AAiFA,OAAOA,SAAP,MAAsB,WAAtB;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AAEA,SAASC,YAAT,QAA6B,iBAA7B;AACA,SAASC,QAAT,QAAyB,uBAAzB;AAEA,eAAe;EACbC,KAAK,EAAE,OAAO;IAAEC,EAAE,EAAEH,YAAY;EAAlB,CAAP,CADM;;EAEbI,IAAI,GAAG;IACH,MAAMC,KAAI,GAAI,EAAd;;IACA,KAAK,IAAIC,IAAI,CAAb,EAAgBA,KAAK,EAArB,EAAyBA,CAAC,EAA1B,EAA8B;MAC1BD,KAAK,CAACE,IAAN,CAAWD,IAAI,KAAf;IACJ;;IACA,OAAO;MACHD,KADG;MAEHG,KAAK,EAAE,KAAKC,sBAAL;IAFJ,CAAP;EAIH,CAXY;;EAYbC,WAAW,GAAG;IACZ,OAAO;MACLF,KAAK,EAAE;QACLG,QAAQ,EAAE;UAACV;QAAD,CADL;QAELW,KAAK,EAAE;UAACX;QAAD,CAFF;QAGLY,WAAW,EAAE;UAACZ;QAAD,CAHR;QAILa,QAAQ,EAAE;UAACb;QAAD,CAJL;QAKLc,IAAI,EAAE;UAACd;QAAD,CALD;QAMLe,IAAI,EAAE;UAACf;QAAD;MAND;IADF,CAAP;EAWD,CAxBY;;EAyBbgB,OAAO,EAAE;IACLC,WAAW,GAAG;MACZ,KAAKf,EAAL,CAAQgB,MAAR;MACA,IAAG,CAAC,KAAKhB,EAAL,CAAQgB,MAAR,EAAJ,EACExB,SAAS,CAACyB,KAAV;MACA,KAAKC,MAAL,CAAYC,QAAZ,CAAqB,mBAArB,EAA0C,KAAKd,KAA/C,EAAsDe,IAAtD,CAA2D,MAAM;QAC7D,KAAKC,OAAL,CAAajB,IAAb,CAAkB;UACdkB,IAAI,EAAE,YADQ;UAEdC,MAAM,EAAE;YAAEC,EAAE,EAAE,KAAKnB,KAAL,CAAWmB;UAAjB;QAFM,CAAlB;QAIA,KAAKnB,KAAL,GAAa,KAAKC,sBAAL,EAAb;MACH,CAND,EAMGmB,KANH,CAMS,MAAM;QACXjC,SAAS,CAACkC,IAAV;MACH,CARD;IASH,CAdI;;IAeLpB,sBAAsB,GAAG;MACrB,MAAMqB,IAAG,GAAI,KAAKT,MAAL,CAAYU,KAAZ,CAAkBD,IAAlB,CAAuBA,IAApC;MACA,MAAMH,EAAC,GAAIK,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,QAA3B,CAAX;MACA,OAAO;QACHP,EAAE,EAAEA,EADD;QAEHG,IAAI,EAAE,KAAKT,MAAL,CAAYU,KAAZ,CAAkBD,IAFrB;QAGHnB,QAAQ,EAAE,EAHP;QAIHwB,SAAS,EAAEL,IAJR;QAKHlB,KAAK,EAAE,EALJ;QAMHC,WAAW,EAAE,EANV;QAOHC,QAAQ,EAAE,EAPP;QAQHC,IAAI,EAAE,EARH;QASHC,IAAI,EAAE,EATH;QAUHoB,SAAS,EAAE;MAVR,CAAP;IAYJ;;EA9BK,CAzBI;EAyDbC,QAAQ,EAAE,EACN,GAAGzC,QAAQ,CAAC,CAAC,YAAD,CAAD;EADL,CAzDG;EA4Db0C,UAAU,EAAE;IACVzC,SADU;IAEVC,UAFU;IAGVC;EAHU;AA5DC,CAAf","names":["NProgress","mapState","BaseInput","BaseSelect","BaseButton","useVuelidate","required","setup","v$","data","times","i","push","event","createFreshEventObject","validations","category","title","description","location","date","time","methods","createEvent","$touch","start","$store","dispatch","then","$router","name","params","id","catch","done","user","state","Math","floor","random","organizer","attendees","computed","components"],"sourceRoot":"","sources":["/Users/asmitnepali/Documents/projects/personal/real-world-vue/src/views/EventCreate.vue"],"sourcesContent":["<template>\n  <div>\n    <h1>Create an Event</h1>\n    <form @submit.prevent=\"createEvent\">\n      <BaseSelect \n      label=\"Select a category\" \n      :options=\"categories\" \n      v-model=\"event.category\" \n      class=\"field\"\n      @blur=\"v$.event.category.$touch()\"/>\n      <template v-if=\"v$.event.category.$error\">\n        <p v-if=\"!v$.event.category.required.$invliad\" class=\"-text-error\">Category is required.</p>\n      </template>\n    \n\n      <h3>Name & describe your event</h3>\n      <div class=\"field\">\n        <BaseInput \n        type=\"text\" \n        placeholder=\"Title\"\n        label=\"Title\" \n        v-model:value=\"event.title\"\n        @blur=\"v$.event.title.$touch()\"\n       />\n        <template v-if=\"v$.event.title.$error\">\n          <p v-if=\"v$.event.title.required.$invalid\" class=\"-text-error\">Title is required.</p>\n        </template>  \n\n      </div>\n      <div class=\"field\">\n        <BaseInput \n        type=\"text\" \n        placeholder=\"Description\" \n        label=\"Description\" \n        v-model:value=\"event.description\"\n        @blur=\"v$.event.description.$touch()\"/>\n\n        <template v-if=\"v$.event.description.$error\">\n          <p v-if=\"v$.event.description.required.$invalid\" class=\"-text-error\">Description is required.</p>\n        </template> \n      </div>\n\n      <h3>Where is your event?</h3>\n      <div class=\"field\">\n        <BaseInput \n        type=\"text\" \n        placeholder=\"Location\" \n        label=\"Location\" \n        v-model:value=\"event.location\"\n        @blur=\"v$.event.location.$touch()\"/>\n        <template v-if=\"v$.event.location.$error\">\n          <p v-if=\"v$.event.location.required.$invalid\" class=\"-text-error\">Location is required.</p>\n        </template> \n      </div>\n\n      <h3>When is your event?</h3>\n\n      <div class=\"field\">\n        <label>Date</label>\n        <input type=\"date\" v-model=\"event.date\" placeholder=\"Select a date\"/>\n      </div>\n\n      <div class=\"field\">\n        <BaseSelect \n        label=\"Select a time\" \n        :options=\"times\" v-model=\"event.time\" \n        class=\"field\"\n        @blur=\"v$.event.time.$touch()\"\n        />\n\n        <template v-if=\"v$.event.time.$error\">\n        <p v-if=\"!v$.event.time.required.$invliad\" class=\"-text-error\">Time is required.</p>\n      </template>\n      </div>\n\n      <!-- <input type=\"submit\" class=\"button -fill-gradient\" value=\"Submit\"/> -->\n      <BaseButton type=\"submit\" buttonClass=\"-fill-gradient\">Submit</BaseButton>\n    </form>\n  </div>\n</template>\n<script>\nimport NProgress from 'nprogress';\nimport { mapState } from 'vuex';\nimport BaseInput from '@/components/BaseInput.vue';\nimport BaseSelect from '@/components/BaseSelect.vue';\nimport BaseButton from '@/components/BaseButton.vue';\n\nimport { useVuelidate } from '@vuelidate/core'\nimport { required } from '@vuelidate/validators'\n\nexport default {\n  setup: () => ({ v$: useVuelidate() }),\n  data() {\n      const times = [];\n      for (let i = 1; i <= 24; i++) {\n          times.push(i + \":00\");\n      }\n      return {\n          times,\n          event: this.createFreshEventObject()\n      };\n  },\n  validations() {\n    return {\n      event: {\n        category: {required},\n        title: {required},\n        description: {required},\n        location: {required},\n        date: {required},\n        time: {required}\n\n      }\n    }\n  },\n  methods: {\n      createEvent() {\n        this.v$.$touch()\n        if(!this.v$.$touch())\n          NProgress.start();\n          this.$store.dispatch(\"event/createEvent\", this.event).then(() => {\n              this.$router.push({\n                  name: \"event-show\",\n                  params: { id: this.event.id }\n              });\n              this.event = this.createFreshEventObject();\n          }).catch(() => {\n              NProgress.done();\n          });\n      },\n      createFreshEventObject() {\n          const user = this.$store.state.user.user;\n          const id = Math.floor(Math.random() * 10000000);\n          return {\n              id: id,\n              user: this.$store.state.user,\n              category: \"\",\n              organizer: user,\n              title: \"\",\n              description: \"\",\n              location: \"\",\n              date: \"\",\n              time: \"\",\n              attendees: []\n          };\n      }\n  },\n  computed: {\n      ...mapState([\"categories\"])\n  },\n  components: {\n    BaseInput,\n    BaseSelect,\n    BaseButton\n}\n}\n</script>\n\n<style scoped>\n.field {\n  margin-bottom: 24px;\n}\n.-text-error {\n  color:red;\n}\n</style>"]},"metadata":{},"sourceType":"module"}